{"version":3,"sources":["events.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"events.js","sourcesContent":["// http://stackoverflow.com/questions/28262674/retrieve-google-calendar-events-using-api-v3-in-javascript\r\n\r\nvar clientId = '77587040839-8rh5g1dbhbur1hpmao2f5dgc0256dj27.apps.googleusercontent.com'; //choose web app client Id, redirect URI and Javascript origin set to http://localhost\r\nvar apiKey = 'AIzaSyCRP13syzKkOemWXKA3wXi1_bJsj_Fe3c0'; //choose public apiKey, any IP allowed (leave blank the allowed IP boxes in Google Dev Console)\r\nvar userEmail = \"web-professionals.ch_7j3opk4ea81j075e22eokd74ro@group.calendar.google.com\"; //your calendar Id\r\nvar userTimeZone = \"Rome\"; //example \"Rome\" \"Los_Angeles\" ecc...\r\nvar maxRows = 10; //events to shown\r\nvar calName = \"Events\"; //name of calendar (write what you want, doesn't matter)\r\n\r\nvar scopes = 'https://www.googleapis.com/auth/calendar';\r\n\r\n//--------------------- Add a 0 to numbers\r\nfunction padNum(num) {\r\n    if (num <= 9) {\r\n        return \"0\" + num;\r\n    }\r\n    return num;\r\n}\r\n//--------------------- end\r\n\r\n//--------------------- num Month to String\r\nfunction monthString(num) {\r\n    if (num === \"01\") { return \"Januar\"; }\r\n    else if (num === \"02\") { return \"Februar\"; }\r\n    else if (num === \"03\") { return \"MÃ¤rz\"; }\r\n    else if (num === \"04\") { return \"April\"; }\r\n    else if (num === \"05\") { return \"Mai\"; }\r\n    else if (num === \"06\") { return \"Juni\"; }\r\n    else if (num === \"07\") { return \"Juli\"; }\r\n    else if (num === \"08\") { return \"August\"; }\r\n    else if (num === \"09\") { return \"September\"; }\r\n    else if (num === \"10\") { return \"Oktober\"; }\r\n    else if (num === \"11\") { return \"November\"; }\r\n    else if (num === \"12\") { return \"Dezember\"; }\r\n}\r\n//--------------------- end\r\n\r\n//--------------------- from num to day of week\r\nfunction dayString(num){\r\n    if (num == \"1\") { return \"Montag\" }\r\n    else if (num == \"2\") { return \"Dienstag\" }\r\n    else if (num == \"3\") { return \"Mittwoch\" }\r\n    else if (num == \"4\") { return \"Donnerstag\" }\r\n    else if (num == \"5\") { return \"Freitag\" }\r\n    else if (num == \"6\") { return \"Samstag\" }\r\n    else if (num == \"0\") { return \"Sonntag\" }\r\n}\r\n//--------------------- end\r\n\r\n//--------------------- client CALL\r\nfunction handleClientLoad() {\r\n    gapi.client.setApiKey(apiKey);\r\n    checkAuth();\r\n}\r\n//--------------------- end\r\n\r\n//--------------------- check Auth\r\nfunction checkAuth() {\r\n    gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);\r\n}\r\n//--------------------- end\r\n\r\n//--------------------- handle result and make CALL\r\nfunction handleAuthResult(authResult) {\r\n    if (authResult) {\r\n        makeApiCall();\r\n    }\r\n}\r\n//--------------------- end\r\n\r\n//--------------------- API CALL itself\r\nfunction makeApiCall() {\r\n    var today = new Date(); //today date\r\n    gapi.client.load('calendar', 'v3', function () {\r\n        var request = gapi.client.calendar.events.list({\r\n            'calendarId' : userEmail,\r\n            'timeZone' : userTimeZone,\r\n            'singleEvents': true,\r\n            'timeMin': today.toISOString(), //gathers only events not happened yet\r\n            'maxResults': maxRows,\r\n            'orderBy': 'startTime'});\r\n        request.execute(function (resp) {\r\n            for (var i = 0; i < resp.items.length; i++) {\r\n                var li = document.createElement('li');\r\n                var item = resp.items[i];\r\n                var classes = [];\r\n                //console.log(item);\r\n                var location = item.location;\r\n                var allDay = item.start.date? true : false;\r\n                var startDT = allDay ? item.start.date : item.start.dateTime;\r\n                var dateTime = startDT.split(\"T\"); //split date from time\r\n                var date = dateTime[0].split(\"-\"); //split yyyy mm dd\r\n                var startYear = date[0];\r\n                var startMonth = monthString(date[1]);\r\n                var startDay = date[2];\r\n                console.log('startMonth '+startMonth);\r\n                console.log('startDay '+startDay);\r\n                console.log('startYear '+ startYear);\r\n                console.log(startDT);\r\n                var startDateISO = new Date(date[1] + \" \" + startDay + \", \" + startYear + \" 00:00:00\");\r\n                console.log(\"startDateISO \"+startDateISO);\r\n                var startDayWeek = dayString(startDateISO.getDay());\r\n                if( allDay == true){ //change this to match your needs\r\n                    var str = [\r\n                        startDayWeek, ', ',\r\n                        startDay, '.',\r\n                        startMonth, ' ',\r\n                        startYear, ': ', item.summary ,\r\n                        location\r\n                    ];\r\n                }\r\n                else{\r\n                    var time = dateTime[1].split(\":\"); //split hh ss etc...\r\n                    var startHour = time[0];\r\n                    var startMin = time[1];\r\n                    var str = [ //change this to match your needs\r\n                        startDayWeek, ', ',\r\n                        startDay, '.',\r\n                        startMonth, ' ',\r\n                        startYear, ' - ',\r\n                        startHour, ':', startMin, ': ', item.summary ,\r\n                        location\r\n                    ];\r\n                }\r\n                li.innerHTML = str.join('');\r\n                li.setAttribute('class', classes.join(' '));\r\n                document.getElementById('events').appendChild(li);\r\n            }\r\n            //document.getElementById('updated').innerHTML = \"updated \" + today;\r\n            document.getElementById('calendar').innerHTML = calName;\r\n        });\r\n    });\r\n}\r\n\r\n//--------------------- end"],"sourceRoot":"/source/"}